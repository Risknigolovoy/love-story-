<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Для Тебя ❤️</title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, updateDoc, arrayUnion, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // Передаем функции в глобальный объект window, чтобы наш основной скрипт мог их использовать
        window.firebase = {
            initializeApp,
            getAuth,
            signInAnonymously,
            onAuthStateChanged,
            getFirestore,
            doc,
            setDoc,
            onSnapshot,
            updateDoc,
            arrayUnion,
            getDoc,
            serverTimestamp
        };
    </script>
    <script src="script.js" type="module" defer></script>
</head>
<body>
    <div class="stars"></div>

    <div class="app-container">
        <nav class="app-nav">
            <button id="nav-heart" class="nav-button active" data-view="heart-view">Сердце</button>
            <button id="nav-game" class="nav-button" data-view="game-view">Игра</button>
        </nav>

        <main class="app-content">
            <div id="heart-view" class="view active-view">
                <svg id="heart-svg" class="heart-svg" viewBox="0 0 32 29.6">
                    <path d="M23.6,0c-3.4,0-6.3,2.7-7.6,5.6C14.7,2.7,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4c0,9.4,9.5,11.9,16,21.2c6.1-9.3,16-12.1,16-21.2C32,3.8,28.2,0,23.6,0z"/>
                </svg>
                <p id="love-message" class="love-message">Нажми на кнопочку ниже...</p>
                <button id="message-button" class="action-button">Для тебя...</button>
                <div id="color-palette" class="color-palette">
                    <div class="color-dot" style="background-color: #ff7a7a;" data-color="#ff7a7a"></div>
                    <div class="color-dot" style="background-color: #a27aff;" data-color="#a27aff"></div>
                    <div class="color-dot" style="background-color: #7affb8;" data-color="#7affb8"></div>
                    <div class="color-dot" style="background-color: #f5ff7a;" data-color="#f5ff7a"></div>
                    <div class="color-dot" style="background-color: #7ad7ff;" data-color="#7ad7ff"></div>
                </div>
            </div>

            <div id="game-view" class="view">
                <div id="game-connect-screen" class="game-screen">
                    <h2 class="game-title">Совместная игра</h2>
                    <p class="game-subtitle">Создайте игру и поделитесь кодом, или присоединитесь к существующей.</p>
                    <button id="create-game-btn" class="action-button orange">Создать новую игру</button>
                    <div class="divider">ИЛИ</div>
                    <form id="join-game-form" class="join-form">
                        <input type="text" id="join-game-input" placeholder="Введите код игры" class="game-input"/>
                        <button type="submit" class="action-button purple">Войти</button>
                    </form>
                    <p id="game-error" class="error-message"></p>
                </div>
                <div id="game-chat-screen" class="game-screen hidden">
                    <div class="game-info">
                        <p>Код игры (нажми, чтобы скопировать):</p>
                        <strong id="game-id-display" class="game-id"></strong>
                        <span id="copy-success" class="copy-success"></span>
                    </div>
                    <div id="chat-window" class="chat-window"></div>
                    <form id="chat-form" class="chat-form">
                        <input type="text" id="chat-input" placeholder="Ваш ответ..." class="chat-input" autocomplete="off"/>
                        <button id="send-btn" type="submit" class="send-button">➤</button>
                    </form>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
